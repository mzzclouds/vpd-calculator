<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cannabis VPD Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Cannabis VPD Calculator</h1>
        </header>

        <div class="main-content">
            <div class="calculator-panel">
                <div class="input-group">
                    <label for="temperature">Temperature: <span id="tempDisplay">75</span>¬∞<span id="tempUnit">F</span></label>
                    <input type="range" id="tempSlider" min="60" max="95" value="75" step="1">
                    <input type="number" id="tempInput" min="60" max="95" value="75" step="0.1">
                    <div class="unit-toggle">
                        <button class="unit-btn active" onclick="setTempUnit('F')">¬∞F</button>
                        <button class="unit-btn" onclick="setTempUnit('C')">¬∞C</button>
                    </div>
                </div>

                <div class="input-group">
                    <label for="humidity">Relative Humidity: <span id="humidityDisplay">60</span>%</label>
                    <input type="range" id="humiditySlider" min="30" max="90" value="60" step="1">
                    <input type="number" id="humidityInput" min="30" max="90" value="60" step="1">
                </div>

                <div class="input-group">
                    <label>Growth Stage:</label>
                    <div class="stage-selector">
                        <button class="stage-btn" data-stage="seedling" onclick="setGrowthStage('seedling')">Seedling</button>
                        <button class="stage-btn active" data-stage="vegetative" onclick="setGrowthStage('vegetative')">Vegetative</button>
                        <button class="stage-btn" data-stage="flowering" onclick="setGrowthStage('flowering')">Flowering</button>
                    </div>
                </div>

                <div class="input-group">
                    <label class="checkbox-label">
                        <input type="checkbox" id="leafTempCheck" onchange="toggleLeafTemp()">
                        <span class="checkmark"></span>
                        Use Leaf Temperature (more accurate)
                    </label>
                    <div class="leaf-temp-controls" id="leafTempControls" style="display: none;">
                        <label for="leafTemp">Leaf Temperature: <span id="leafTempDisplay">72.0</span>¬∞<span id="leafTempUnit">F</span></label>
                        <input type="range" id="leafTempSlider" min="60" max="95" value="72" step="0.5">
                        <input type="number" id="leafTempInput" min="60" max="95" value="72" step="0.5">
                        <div class="leaf-temp-info">
                            <small>üí° Enter the actual leaf temperature reading from your thermometer</small>
                        </div>
                    </div>
                </div>


                <!-- Mobile VPD Chart - will be positioned after DLI on mobile -->
                <div class="chart-container mobile-chart">
                    <canvas id="vpdChartMobile"></canvas>
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #8e44ad;"></div>
                            <span>Danger Low</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #3498db;"></div>
                            <span>Too Low</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #27ae60;"></div>
                            <span id="optimalLabelMobile">Optimal for Vegetative</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #e67e22;"></div>
                            <span>Too High</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #8b0000;"></div>
                            <span>Danger High</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background-color: #000;"></div>
                            <span>Your Reading</span>
                        </div>
                    </div>
                    
                    <div class="vpd-result">
                        <div class="vpd-value" id="vpdValueMobile">1.20</div>
                        <div class="vpd-status status-optimal" id="vpdStatusMobile">Optimal Range</div>
                        <div class="target-info" id="targetInfoMobile">Target: 1.0 kPa</div>
                    </div>
                    
                </div>

                <div class="input-group">
                    <label>Save/Load Settings:</label>
                    <div class="storage-controls">
                        <button class="storage-btn save-btn" onclick="saveSettings()">üíæ Save Current Settings</button>
                        <button class="storage-btn load-btn" onclick="loadSettings()">üìÅ Load Saved Settings</button>
                        <button class="storage-btn clear-btn" onclick="clearSettings()">üóëÔ∏è Clear Saved Data</button>
                    </div>
                    <div class="storage-info" id="storageInfo">
                        <small>üí° Settings are saved locally in your browser</small>
                    </div>
                </div>

                <div class="input-group">
                    <label>Download Readings:</label>
                    <div class="storage-controls">
                        <button class="storage-btn save-btn" onclick="downloadCurrentReading()">üìä Download Current Reading</button>
                        <button class="storage-btn log-btn" onclick="logCurrentReading()">üìù Log Current Reading</button>
                        <button class="storage-btn load-btn" onclick="downloadAllReadings()">üìÅ Download All Logged Readings</button>
                        <button class="storage-btn clear-btn" onclick="clearStoredReadings()">üóëÔ∏è Clear Logged Readings</button>
                    </div>
                </div>

            </div>

            <div class="chart-container">
                <canvas id="vpdChartDesktop"></canvas>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #8e44ad;"></div>
                        <span>Danger Low</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #3498db;"></div>
                        <span>Too Low</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #27ae60;"></div>
                        <span id="optimalLabel">Optimal for Vegetative</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e67e22;"></div>
                        <span>Too High</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #8b0000;"></div>
                        <span>Danger High</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #000;"></div>
                        <span>Your Reading</span>
                    </div>
                </div>
                
                <div class="vpd-result">
                    <div class="vpd-value" id="vpdValue">1.20</div>
                    <div class="vpd-status status-optimal" id="vpdStatus">Optimal Range</div>
                    <div class="target-info" id="targetInfo">Target: 1.0 kPa</div>
                </div>
                
                <div class="target-section" id="targetSection">
                    <label class="checkbox-label">
                        <input type="checkbox" id="targetVpdCheck">
                        <span class="checkmark"></span>
                        Set Custom Target VPD
                    </label>
                    
                    <label class="checkbox-label">
                        <input type="checkbox" id="dliCheck" onchange="toggleDLI()">
                        <span class="checkmark"></span>
                        Track Daily Light Integral (DLI)
                    </label>
                    
                    <div id="targetControlsContainer"></div>
                    
                    <div class="recommendations" id="recommendations">
                        <!-- Recommendations will appear here -->
                    </div>
                    
                    <div class="dli-controls" id="dliControls" style="display: none;">
                        <div class="dli-inputs-row">
                            <div class="dli-input-group">
                                <label for="ppfd">PPFD: <span id="ppfdDisplay">500</span> Œºmol/m¬≤/s</label>
                                <input type="number" id="ppfdInput" min="100" max="2000" value="500" step="10">
                                <div class="input-info">
                                    <small>üí° Use a quantum meter to measure light intensity</small>
                                </div>
                            </div>
                            <div class="dli-input-group">
                                <label for="photoperiod">Photoperiod: <span id="photoperiodDisplay">12</span> hours</label>
                                <input type="number" id="photoperiodInput" min="8" max="24" value="12" step="0.5">
                                <div class="input-info">
                                    <small>üí° Number of hours your lights are on per day</small>
                                </div>
                            </div>
                        </div>
                        <div class="dli-result">
                            <div class="dli-value" id="dliDisplay">21.6</div>
                            <div class="dli-unit">mol/m¬≤/day</div>
                        </div>
                        
                        <div class="dli-chart-container">
                            <canvas id="dliChart" width="600" height="300"></canvas>
                            <div class="dli-chart-legend">
                                <div class="legend-item">
                                    <div class="legend-color" style="background-color: #4ade80;"></div>
                                    <span>Regular Growth</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color" style="background-color: #16a34a;"></div>
                                    <span>High Growth*</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dli-info">
                            <small>üí° Target DLI - Seedling: 15-25 | Vegetative: 25-40 | Flowering: 35-60 mol/m¬≤/day</small>
                            <br>
                            <small>* High growth rates require supplemental CO‚ÇÇ (800-1200 ppm) to prevent light stress and maximize photosynthesis efficiency.</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="growth-stages">
            <div class="stage-card">
                <h3 class="stage-title">Seedling Stage</h3>
                <p><strong>Optimal VPD:</strong> 0.4 - 0.8 kPa</p>
                <p><strong>Temperature:</strong> 75-80¬∞F (24-27¬∞C)</p>
                <p><strong>Humidity:</strong> 65-75%</p>
                <p>Young plants need higher humidity to support initial growth and root development.</p>
            </div>

            <div class="stage-card">
                <h3 class="stage-title">Vegetative Stage</h3>
                <p><strong>Optimal VPD:</strong> 0.8 - 1.2 kPa</p>
                <p><strong>Temperature:</strong> 75-82¬∞F (24-28¬∞C)</p>
                <p><strong>Humidity:</strong> 55-65%</p>
                <p>Established plants can handle lower humidity as they develop stronger transpiration.</p>
            </div>

            <div class="stage-card">
                <h3 class="stage-title">Flowering Stage</h3>
                <p><strong>Optimal VPD:</strong> 1.0 - 1.5 kPa</p>
                <p><strong>Temperature:</strong> 70-78¬∞F (21-26¬∞C)</p>
                <p><strong>Humidity:</strong> 45-55%</p>
                <p>Lower humidity prevents mold/mildew on dense buds while maintaining transpiration.</p>
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 VPD Calculator. All rights reserved. | <a href="#" id="privacyLink" onclick="openPrivacyModal()">Privacy Policy</a></p>
        </div>
    </footer>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closePrivacyModal()">&times;</span>
            <h2>Privacy Policy</h2>
            <div class="privacy-content">
                <p><strong>Last updated: September 7, 2025</strong></p>
                
                <h3>Information We Collect</h3>
                <p>This VPD Calculator operates entirely in your browser and does not collect, store, or transmit any personal information to external servers. All calculations and data remain on your local device.</p>
                
                <h3>Local Storage</h3>
                <p>The application may store your preferences (such as temperature units, growth stage selections, and DLI settings) locally in your browser's storage to enhance your user experience. This data never leaves your device.</p>
                
                <h3>No Third-Party Tracking</h3>
                <p>We do not use cookies, analytics, or any third-party tracking services. Your usage of this calculator is completely private.</p>
                
                <h3>Data Security</h3>
                <p>Since all data processing occurs locally on your device, your information remains secure and under your complete control.</p>
                
                <h3>Changes to This Policy</h3>
                <p>Any updates to this privacy policy will be reflected in the application. Continued use constitutes acceptance of any changes.</p>
                
                <h3>Contact</h3>
                <p>For questions about this privacy policy, please email us at allmyonlineprojects@gmail.com.</p>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>